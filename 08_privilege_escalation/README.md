### Инструкция для студентов:

1. Ваша задача - исправить уязвимость в файле `vulnerable_app.py`, добавив проверку прав доступа при обновлении профиля.
2. Основные требования:
   - Запретить изменение поля 'role' для обычных пользователей
   - Разрешить изменение только безопасных полей (email)
   - Возвращать ошибку при попытке изменить запрещенные поля
   - Сохранить возможность изменения email
3. После исправления запустите тесты командой `pytest test_privilege_escalation.py -v`.
4. Все тесты должны пройти успешно. В частности:
   - Обычные пользователи не должны иметь возможность изменить свою роль
   - Попытки изменения запрещенных полей должны блокироваться
   - Изменение email должно работать корректно
5. Для проверки можно также запускать приложение:
   ```bash
   python vulnerable_app.py chris password789 '{"email": "new@example.com"}'  # Должно работать
   python vulnerable_app.py chris password789 '{"role": "admin"}'  # Должно выдавать ошибку
   ```

Тесты проверяют как базовую функциональность, так и защиту от повышения привилегий, а также наличие необходимых проверок в коде.